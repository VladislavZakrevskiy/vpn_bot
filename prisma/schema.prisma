generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         String     @id @unique @default(uuid()) @db.Uuid
  tg_id      String     @unique
  username   String
  first_name String
  last_name  String
  purchases  Purchase[]
}

model Purchase {
  id      String @id @unique @default(uuid()) @db.Uuid
  user_id String @db.Uuid
  user    User   @relation(fields: [user_id], references: [id])
  rate_id String @db.Uuid
  rate    Rate   @relation(fields: [rate_id], references: [id])

  purchase_date DateTime
  amount        Int
  currency      Currency
  active Boolean
}

model Rate {
  id          String     @id @unique @default(uuid()) @db.Uuid
  name        String
  description String
  expiresIn   Int
  purchases   Purchase[]
}

enum Currency {
  RUB
  STARS
  CRYPTO
}
